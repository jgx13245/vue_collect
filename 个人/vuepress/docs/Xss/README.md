# xss

## 什么是xss

XSS，即 Cross Site Script，中译是<font color=red>跨站脚本攻击</font>；其原本缩写是 CSS，但为了和层叠样式表(Cascading Style Sheet)有所区分，因而在安全领域叫做 XSS。

XSS 攻击是指攻击者在网站上注入恶意的客户端代码，通过恶意脚本对客户端网页进行篡改，从而在用户浏览网页时，对用户浏览器进行控制或者获取用户隐私数据的一种攻击方式。

攻击者对客户端网页注入的恶意脚本一般包括 JavaScript，有时也会包含 HTML 和 Flash。有很多种方式进行 XSS 攻击，

但它们的共同点为：将一些隐私数据像 cookie、session 发送给攻击者，

将受害者重定向到一个由攻击者控制的网站，在受害者的机器上进行一些恶意操作。

XSS攻击可以分为3类：反射型（非持久型）、存储型（持久型）、基于DOM。

1. 反射型（非持久型）

黑客先将含有XSS代码的恶意链接邮件发送给目标用户，用户打开后，会访问链接对应的服务器，服务器收到链接请求时，会将带有的XSS代码的数据再次发送给用户，此时用户浏览器就会默认执行带有XSS代码的脚本，此时会触发XSS漏洞，不过在这个过程中，黑客先确认发给某个服务器，服务器会给黑客返回发送的数据

2. 存储型 （持久）

攻击脚本会被永久的保存在目标服务器的数据库或者文件中（黑客会在某论坛进行留言，此时论坛对应的服务器会将黑客的留言保存在服务器，但是留言的内容有XSS恶意代码攻击，当其他用户访问此留言回帖时，浏览器就会执行XSS恶意代码）
 
 
3. DOM型：直接在浏览器端进行恶意代码的执行，不会向服务器发请求，可以说DOM型是一种特殊的反射型

## 防止xss攻击的方法

1. 过滤特殊字符

2. 使用 httpOnly 头指定类型,这样js脚本就无法获取到cookie的信息

3. 过滤或移除特殊的 html 标签：<script>、<iframe>等。

4. 过滤 js 事件的标签：onclick、onerror、onfocus等。